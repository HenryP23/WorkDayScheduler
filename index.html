<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <title>Work Day Scheduler</title>
</head>

<body>
  <header class="jumbotron">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="currentDay" class="lead"></p>
  </header>
  <div class="container">
    <!-- Timeblocks go here -->
    
    <div class="row" value="9">
      <div class="col-2 "><p1><br>9am</p1></div>
      <input type="text" class="col-8" id="Time9">
      <button type="button" value="9" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="10">
      <div class="col-2"><p1><br>10am</p1></div>
      <input type="text" class="col-8" id="Time10">
      <button type="button" value="10" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="11">
      <div class="col-2"><p1><br>11am</p1></div>
      <input type="text" class="col-8" id="Time11">
      <button type="button" value="11" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="12">
      <div class="col-2"><p1><br>12am</p1></div>
      <input type="text" class="col-8" id="Time12">
      <button type="button" value="12" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="1">
      <div class="col-2"><p1><br>1pm</div>
      <input type="text" class="col-8" id="Time1">
      <button type="button" value="1" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="2">
      <div class="col-2"><p1><br>2pm</p1></div>
      <input type="text" class="col-8" id="Time2">
      <button type="button" value="2" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="3">
      <div class="col-2"><p1><br>3pm</p1></div>
      <input type="text" class="col-8" id="Time3">
      <button type="button" value="3" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="4">
      <div class="col-2"><p1><br>4pm</p1></div>
      <input type="text" class="col-8" id="Time4">
      <button type="button" value="4" class="col-2 saveBtn">Save</button>
    </div>
    <div class="row" value="5">
      <div class="col-2"><p1><br>5pm</p1></div>
      <input type="text" class="col-8" id="Time5">
      <button type="button" value="5" class="col-2 saveBtn">Save</button>
    </div>


  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

  <script>
    var workDayHours = ["9 am", "10 am", "11 am", "12 pm", "1 pm", "2 pm", "3 pm", "4 pm", "5 pm"];
    var hours = ["9", "10", "11", "12", "1", "2", "3", "4", "5"];
    const m = moment().format('MMMM Do YYYY, h:mm:ss a');
    const time = moment().format('h a');
    const timeH = moment().format('h a');
    var belowTime = true;
    var myarray = "";
    var scheduleText = ["", "", "","", "", "", "", "", "",];
    var save9 = "";
    var save10 = "";
    var save11 = "";
    var save12 = "";
    var save1 = "";
    var save2 = "";
    var save3 = "";
    var save4 = "";
    var save5 = "";
    var saveIndex = 9;

    //set time at the top
    $("#currentDay").text(m);

    // load all saved data
    save9 = localStorage.getItem('saveText9' || " ");
    $('#Time9').val(save9);
    save10 = localStorage.getItem('saveText10' || " ");
    $('#Time10').val(save10);
    save11 = localStorage.getItem('saveText11' || " ");
    $('#Time11').val(save11);
    save12 = localStorage.getItem('saveText12' || " ");
    $('#Time12').val(save12);
    save1 = localStorage.getItem('saveText1' || " ");
    $('#Time1').val(save1);
    save2 = localStorage.getItem('saveText2' || " ");
    $('#Time2').val(save2);
    save3 = localStorage.getItem('saveText3' || " ");
    $('#Time3').val(save3);
    save4 = localStorage.getItem('saveText4' || " ");
    $('#Time4').val(save4);
    save5 = localStorage.getItem('saveText5' || " ");
    $('#Time5').val(save5);

    //check if current time is below or above workDayHours
    for (var i = 0; i < workDayHours.length; i++) {
      if(workDayHours[i] === time)
      {
        for(var x = i; x < workDayHours.length; x++)
        {
          if(workDayHours[x] === time)
          {
            console.log("Present Time: " + workDayHours[x]);
            $(document.querySelector("#Time" + hours[x])).css("background-color", "#ff6961");
            belowTime = false;
          }
          else{
          console.log("Above Time: " + workDayHours[x]);
            $(document.querySelector("#Time" + hours[x])).css("background-color", "#77dd77");
          }
        }
      }
      else if (belowTime) {
        console.log("Below Time: " + workDayHours[i]);
          $(document.querySelector("#Time" +  hours[i])).css("background-color", "#d3d3d3");
      }
    }
    

//save data if button was clicked
var currentSaveIndex;

   // $(document.querySelector("#btnTime" + ))
   $('.saveBtn').on("click", function () {
    var saveValue = $(this).attr("value");
    console.log(saveValue);
    var saveIndex;
    currentSaveIndex = $("#Time"+ saveValue).val();
    console.log(currentSaveIndex);
    if(saveValue === "9"){localStorage.setItem('saveText9', currentSaveIndex);}
    else if(saveValue === "10"){localStorage.setItem('saveText10', currentSaveIndex);}
    else if(saveValue === "11"){localStorage.setItem('saveText11', currentSaveIndex);}
    else if(saveValue === "12"){localStorage.setItem('saveText12', currentSaveIndex);}
    else if(saveValue === "1"){localStorage.setItem('saveText1', currentSaveIndex);}
    else if(saveValue === "2"){localStorage.setItem('saveText2', currentSaveIndex);}
    else if(saveValue === "3"){localStorage.setItem('saveText3', currentSaveIndex);}
    else if(saveValue === "4"){localStorage.setItem('saveText4', currentSaveIndex);}
    else if(saveValue === "5"){localStorage.setItem('saveText5', currentSaveIndex);}
    });

  </script>


</body>

</html>